[build]
command = "npm install && cd client && npm install && npm run build && cd ../netlify/functions && npm install"
publish = "client/build"

[build.environment]
  NODE_VERSION = "20"
  CI = "false"
  JWT_SECRET = "sua-chave-secreta-super-segura-aqui-2024"
  SUPABASE_URL = "https://seu-projeto.supabase.co"
  SUPABASE_ANON_KEY = "sua-chave-anonima"
  SUPABASE_SERVICE_ROLE_KEY = "sua-chave-service-role"

# Netlify Functions
[functions]
directory = "netlify/functions"
node_bundler = "esbuild"

# Plugin para instalar dependÃªncias das functions
[[plugins]]
package = "@netlify/plugin-functions-install-core"

# Redirecionamento para SPA (Single Page Application)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200